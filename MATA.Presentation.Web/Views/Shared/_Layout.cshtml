<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>@ViewBag.Title - MATA Mimarlık</title>

    @Styles.Render("~/Content/css")

    @RenderSection("styles", required: false)

    @Scripts.Render("~/bundles/modernizr")
    @Scripts.Render("~/bundles/jquery")
    @Scripts.Render("~/bundles/jqueryval")

</head>
<body>
    
    @Html.Partial("_TopNavbar")

    <div class="container-fluid body-content">
        @RenderBody()
        <hr />
        <footer class="text-center">
            <p>&copy; @DateTime.Now.Year - MATA Mimarlık</p>
        </footer>
    </div>

    <div id="mata-generic-modal" class="modal fade" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
            </div>
        </div>
    </div>

    @Scripts.Render("~/bundles/bootstrap")
    @Scripts.Render("~/bundles/noty")
    @Scripts.Render("~/bundles/ts")

    <script type="text/javascript">

        MATA.Utils.APP_BASE_URL = '@Url.Content("~")';

        $.validator.setDefaults({
            highlight: function (element) {
                $(element).closest('.form-group').addClass('has-error');
            },
            unhighlight: function (element) {
                $(element).closest('.form-group').removeClass('has-error');
            },
            errorElement: 'span',
            errorClass: 'help-block',
            errorPlacement: function (error, element) {
                if (element.parent('.input-group').length) {
                    error.insertAfter(element.parent());
                } else {
                    error.insertAfter(element);
                }
            }
        });

        $(function () {

            $.validator.setDefaults({
                highlight: function (element) {
                    $(element).closest('.form-group').addClass('has-error');
                },
                unhighlight: function (element) {
                    $(element).closest('.form-group').removeClass('has-error');
                },
                errorElement: 'span',
                errorClass: 'help-block',
                errorPlacement: function (error, element) {
                    if (element.parent('.input-group').length) {
                        error.insertAfter(element.parent());
                    } else {
                        error.insertAfter(element);
                    }
                }
            });

            function markAsActive(_li) {

                let $li = $(_li);
                $li.find('a').each(function (j, _lia) {
                    let $lia = $(_lia);
                    if (('@Request.RawUrl').includes($lia.attr('href'))) {
                        $li.addClass('active');
                    }
                });
                $li.find('ul').each(function (j, _liul) {
                    let $liul = $(_liul);
                    $liul.find('li').each(function (k, _liulli) {
                        markAsActive(_liulli);
                    })
                });

            }

            $('ul.nav.navbar-nav').find('li').each(function (i, _li) {
                markAsActive(_li);
            })

        })

    </script>

    @RenderSection("scripts", required: false)

</body>
</html>
